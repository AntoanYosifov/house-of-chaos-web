<div class="product-details-wrapper">
    <div class="product-details-decoration">
        <div class="decoration-circle decoration-circle-1"></div>
        <div class="decoration-circle decoration-circle-2"></div>
        <div class="decoration-circle decoration-circle-3"></div>
        <div class="decoration-circle decoration-circle-4"></div>
        <div class="decoration-circle decoration-circle-5"></div>
    </div>

    <div class="product-details-container animate-in">
        @if (toastMessage) {
            <div class="cart-toast" [class.success]="toastType === 'success'" [class.error]="toastType === 'error'">
                {{ toastMessage }}
            </div>
        }

        @if(product) {
            <button class="back-button" (click)="goBack()" aria-label="Go back">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                <span>Back</span>
            </button>
            <app-product-item
                [product]="product"
                [addToCartDisabled]="isAddToCartDisabled()"
                [showMaxQuantityBanner]="maxQuantityBannerVisible()"
                [showLoginMessage]="!isLoggedIn()"
                [showReviewsButton]="true"
                [reviewsButtonDisabled]="!isLoggedIn()"
                (addToCart)="onAddToCart()"
                (reviewsClick)="openReviewsPanel()">
            </app-product-item>
        } @else {
            <p>Loading...</p>
        }
    </div>

    @if (productId && reviewsPanelOpen()) {
        <app-reviews-panel
            [productId]="productId"
            [isOpen]="reviewsPanelOpen"
            (closePanel)="closeReviewsPanel()">
        </app-reviews-panel>
    }
</div>
