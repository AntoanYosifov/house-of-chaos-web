<div class="product-management-wrapper">
    <div class="product-management-decoration">
        <div class="decoration-circle decoration-circle-1"></div>
        <div class="decoration-circle decoration-circle-2"></div>
        <div class="decoration-circle decoration-circle-3"></div>
        <div class="decoration-circle decoration-circle-4"></div>
        <div class="decoration-circle decoration-circle-5"></div>
    </div>

    <div class="product-management-container animate-in">
        <div class="product-management-header">
            <div class="logo">
                <h1>House of Chaos</h1>
                <span class="logo-accent">Product Management</span>
            </div>
            <h2 class="page-title">Manage Your Products</h2>
            <p class="page-subtitle">Organize and manage products by category. Add new products or edit existing ones.</p>
        </div>

        <div class="add-product-section">
            <button class="add-product-btn" (click)="goToAddProduct()">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                <span>Add New Product</span>
            </button>
        </div>

        @if (categoriesLoading) {
            <div class="loading-state">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading categories...</p>
            </div>
        } @else if (categories.length === 0) {
            <div class="empty-state">
                <p>No categories available</p>
            </div>
        } @else {
            <div class="categories-grid">
                @for (category of categories; track category?.id; let i = $index) {
                    <div class="category-card" 
                         [class.selected]="selectedCategory?.id === category?.id"
                         (click)="onCategoryClick(category)">
                        <div class="category-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="3" y1="12" x2="21" y2="12"></line>
                                <line x1="3" y1="6" x2="21" y2="6"></line>
                                <line x1="3" y1="18" x2="21" y2="18"></line>
                            </svg>
                        </div>
                        <h3 class="category-title">{{ category?.name }}</h3>
                        <p class="category-description">View and manage products in this category</p>
                    </div>
                }
            </div>
        }

        @if (selectedCategory) {
            <div class="products-section">
                <div class="products-section-header">
                    <h3 class="products-section-title">Products in {{ selectedCategory.name }}</h3>
                </div>

                @if (productsLoading) {
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <p class="loading-text">Loading products...</p>
                    </div>
                } @else {
                    <app-product-board
                        [products]="products"
                        [showAdminActions]="true"
                        (productSelected)="onProductSelected($event)"
                        (editProduct)="onEditProduct($event)"
                        (deleteProduct)="onDeleteProduct($event)">
                    </app-product-board>
                }
            </div>
        }
    </div>
</div>
